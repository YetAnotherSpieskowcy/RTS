\section{Mechanizm budowania (Bogna Lew)}\label{chap:build}
Jednym z istotnych elementów w grach real-time strategy jest tworzenie baz i budowanie fortyfikacji. Mechanizm ten stanowi urozmaicenie rozgrywki i wprowadza dodatkowe aspekty możliwe do uwzględnienia w planowaniu strategii. Dla wielu gier RTS jest wręcz nieodłącznym elementem, który umożliwia graczowi tworzenie i rozwój nowych jednostek, produkcję zasobów, umacnianie swojej pozycji oraz zwiększanie swojej potęgi.

Rozpatrując ten mechanizm konieczne jest uwzględnienie podstawowych ograniczeń związanych z ukształtowaniem terenu oraz rozmieszczeniem już istniejących obiektów i elementów scenerii. Czynniki te mają ogromne znaczenie, gdyż zignorowanie ich może doprowadzić do błędów oraz niepożądanych efektów i w rezultacie do obniżenia jakości rozgrywki. Dodatkowo, kluczową kwestią są zasoby wymagane do wybudowania danego obiektu. Ich istnienie powoduje, że gracz jest w pewien sposób ograniczony i nie może tworzyć budowli w dowolnej ilości.

Jednym z błędów, którym należy przeciwdziałać jest nakładanie się na siebie obiektów. Taka sytuacja może powstać w wyniku braku rozpatrywania przez grę położenia elementów terenu i istniejących budowli w trakcie umieszczania na mapie nowych budynków przez gracza. W efekcie może dojść do sytuacji, że obiekt zostanie wybudowany w miejscu zajmowanym przez inną część scenerii. Gra powinna przeciwdziałać temu zjawisku, uniemożliwiając graczowi tworzenie nowych budynków w miejscu, które w nawet najmniejszym stopniu narusza obszar zajęty przez już istniejący element.

Inną sytuacją, której należy unikać jest umożliwienie graczowi wybudowanie budynku w sposób fizycznie niemożliwy. Przykładem może być ulokowanie obiektu na zbyt stromym zboczu albo na nieodpowiednim gruncie, co w rzeczywistym świecie byłoby niedopuszczalne. Również w tym przypadku gra nie powinna umożliwić graczowi wykonanie takiej akcji. W przeciwnym razie obiekt mógłby zostać umieszczony w miejscu do którego postać gracza nie będzie mieć dostępu i nie będzie mógł z niego korzystać. W efekcie zużyje on bezsensownie swoje zasoby tracąc je bezpowrotnie, co może negatywnie wpłynąć na jego opinię o grze.

Inspiracją do implementacji tego mechanizmu jest gra Warhammer 40,000: Dawn of War. Chociaż realia tej gry znacząco różnią się od tych w których zostanie osadzona fabuła tworzonej przez nas gry, to stanowi świetny przykład pożądanego efektu. Udostępnia ona możliwość podglądu z trzeciej osoby przed wybudowaniem wraz z walidacją położenia. Jeśli miejsce w którym gracz chce postawić budynek jest poprawne tzn. nie nachodzi na inne obiekty oraz teren jest odpowiedni to pokazywany widok jest podświetlany na zielono, w przeciwnym razie - na czerwono. Jest to zbliżony efekt, który chcielibyśmy uzyskać dla widoku pierwszoosobowego.

Aktualnie gra umożliwia graczowi przełączenie się w tryb budowania poprzez naciśnięcie klawisza Tab, który od razu wyświetli podgląd bazowego obiektu. Widok budynku przemieszcza się przed graczem oraz odpowiednio obraca się razem z nim. Efekt poruszania się podglądu został uzyskany za pomocą poniższych wzorów:

$$ x = r \times sin(\alpha) $$
$$ y = 0 $$
$$ z = r \times cos(\alpha) $$

gdzie r to odległość środka obiektu od postaci gracza, natomiast $\alpha$ to kąt o jaki jest on obrócony względem osi y. W przypadku rotacji alpha została przypisana do rotacji obiektu względem tej osi.

Podgląd budynku będzie widoczny do czasu, aż gracz go umieści naciskając prawy lewy myszy, bądź wychodząc z trybu edycji naciskając klawisz Escape.
